---
const response = await fetch('https://api.sheety.co/ee24c7ec5bcd1de3613b55d57ebd634e/nakagameApi/medalRank');
const jsonData = await response.json();

// Access the medalRank array
const medalRank = jsonData.medalRank || [];
---

<section class="flex flex-col justify-center antialiased text-gray-600 min-h-screen p-4">
    <div class="h-full">
        <!-- Table -->
        <div class="w-full max-w-sm mx-auto bg-white shadow-lg rounded-sm border border-gray-200">
            <header class="px-5 py-4 border-b border-gray-100">
                <h1 class="font-semibold text-gray-800" style="font-size:18px;" id="text">สรุปอันดับเหรียญ นาคาเกมส์ครั้งที่ 43</h1>
            </header>
            <div class="p-3">
                <div class="overflow-x-auto">
                    <table class="table-auto w-full">
                        <thead class="text-xs font-semibold uppercase text-black-400 bg-gray-50">
                            <tr>
                                <th class="p-2 whitespace-nowrap">
                                    <div class="font-semibold text-left">คณะ</div>
                                </th>
                                <th class="p-2 whitespace-nowrap">
                                    <div class="font-semibold text-left"><img src="https://medalrank-nakagame42.pages.dev/medal/1.png" alt="" width="30px"></div>
                                </th>
                                <th class="p-2 whitespace-nowrap">
                                    <div class="font-semibold text-left"><img src="https://medalrank-nakagame42.pages.dev/medal/2.png" alt="" width="30px"></div>
                                </th>
                                <th class="p-2 whitespace-nowrap">
                                    <div class="font-semibold text-center"><img src="https://medalrank-nakagame42.pages.dev/medal/3.png" alt="" width="30px"></div>
                                </th>
                                <th class="p-2 whitespace-nowrap">
                                    <div class="font-semibold text-center">รวมเหรียญ</div>
                                </th>
                            </tr>
                        </thead>
                        <tbody class="text-sm divide-y divide-gray-100">
                            {medalRank.map((item) => (
                              <tr key={item.id}>
                                  <td class="p-2 whitespace-nowrap">
                                      <div class="flex items-center">
                                          <div class="w-10 h-10 flex-shrink-0 mr-2 sm:mr-3"><img src={item.img} width="100" height="50"></div>
                                          <div class="font-medium text-gray-800">{item.name}</div>
                                      </div>
                                  </td>
                                  <td class="p-2 whitespace-nowrap">
                                      <div class="text-center text-yellow-400">{item.gold}</div>
                                  </td>
                                  <td class="p-2 whitespace-nowrap">
                                      <div class="text-center font-medium text-gray-500">{item.silver}</div>
                                  </td>
                                  <td class="p-2 whitespace-nowrap">
                                      <div class="text-center font-medium text-yellow-700">{item.bronze}</div>
                                  </td>
                                  <td class="p-2 whitespace-nowrap">
                                      <div class="text-center font-medium text-black-500">{item.sum}</div>
                                  </td>
                              </tr>
                            ))}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div><br>
    <center>
        <h5 class="p-5" id="time_stamp">
      {medalRank.length > 0 ? medalRank[0].timeStamp : 'No timestamp available'}
    </h5>
    </center>
    
</section>
